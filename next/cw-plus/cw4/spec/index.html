<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CosmWasm Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CosmWasm Documentation Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="CosmWasm Documentation" href="/opensearch.xml"><title data-react-helmet="true">CW4 Spec: Group Members | CosmWasm Documentation</title><meta data-react-helmet="true" property="og:url" content="https://docs.cosmwasm.com/next/cw-plus/cw4/spec"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="CW4 Spec: Group Members | CosmWasm Documentation"><meta data-react-helmet="true" name="description" content="cw4 package source code//github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw4/README.md"><meta data-react-helmet="true" property="og:description" content="cw4 package source code//github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw4/README.md"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.cosmwasm.com/next/cw-plus/cw4/spec"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/next/cw-plus/cw4/spec" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/next/cw-plus/cw4/spec" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a20315ff.css">
<link rel="preload" href="/assets/js/runtime~main.89c7119f.js" as="script">
<link rel="preload" href="/assets/js/main.a496d034.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_dark.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/next/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/next/cw-plus/cw4/spec">Next</a></li><li><a class="dropdown__link" href="/0.14/cw-plus/cw4/spec">0.14</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://cosmwasm.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Website</a><a href="https://github.com/CosmWasm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_dark.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://cosmwasm.com" target="_blank" rel="noopener noreferrer" class="menu__link">Website</a></li><li class="menu__list-item"><a href="https://github.com/CosmWasm" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/next/cw-plus/cw4/spec">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/0.14/cw-plus/cw4/spec">0.14</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_3h0W"><img src="/img/logo.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo_dark.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--dark_hz6m"></a><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Welcome</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/introduction/roadmap">Rough Roadmap</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/getting-started/intro">Your First Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/getting-started/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/getting-started/setting-env">Setting Up Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/getting-started/compile-contract">Downloading and Compiling Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/getting-started/interact-with-contract">Uploading and Interacting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/getting-started/next-steps">Next Steps</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/architecture/multichain">What are Multi-Chain Contracts?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/architecture/actor">Actor Model for Contract Calls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/architecture/addresses">Names and Addresses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/architecture/query">Querying Contract State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/architecture/serialization">Serialization Formats</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/architecture/composition">Contract Composition</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/architecture/smart-contracts">Comparison with Solidity Contracts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testnets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/testnets/build-requirements">Build Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/testnets/testnets">Joining Testnets</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Learn</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Simple Option</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/simple-option/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/simple-option/setup">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/simple-option/develop">Develop Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/simple-option/testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/simple-option/next-steps">Next Steps</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Hijack Escrow</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/hijack-escrow/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/hijack-escrow/hack-contract">Hack the Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/hijack-escrow/edit-escrow-hints">Hints</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/governance">Smart Contracts Over Governance</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Name Service</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/name-service/intro">Introduction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Frontend dApp</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/frontend-dapp/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/frontend-dapp/cosmicdapp-logic">Cosmic dApp logic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/frontend-dapp/cosmicdapp-design">Cosmic dApp design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/frontend-dapp/bootstrap-dapp">Bootstrap dApp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/frontend-dapp/dapp-development">Develop dApp</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/videos-workshops">Videos and Workshops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/MIGRATING">Migrating Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/learn/CHANGELOG">CHANGELOG</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/community/hall-of-fame">Hall of Fame</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Plus Contracts</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">CW1</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw1/intro">CW1 Spec: Proxy Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw1/cw1-subkeys">CW1 Subkeys</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw1/cw1-whitelist">CW1 Whitelist</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">CW2</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw2/Spec">CW2 Spec: Contract Info for Migration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">CW3</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw3/spec">CW3 Spec: MultiSig/Voting Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw3/cw3-fixed-spec">CW3 Fixed Multisig</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw3/cw3-flex-spec">CW3 Flexible Multisig</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">CW4</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/next/cw-plus/cw4/spec">CW4 Spec: Group Members</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/cw-plus/cw4/cw4-group-spec">CW4 Group</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/cw-plus/cw4/cw4-stake-spec">CW4 Stake</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">CW20</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw20/spec">CW20 Spec: Fungible Tokens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw20/cw20-base-spec">CW20 Basic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw20/cw20-base-tutorial">CW20-base Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw20/cw20-bonding-spec">CW20 Bonding curve</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw20/cw20-escrow-spec">CW20 Escrow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw20/cw20-staking-spec">CW20 Staking Derivates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw20/cw20-atomic-swap-spec">Atomic Swaps</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">CW721</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw721/spec">CW721 Spec: Non Fungible Tokens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/cw721/cw721-base">Cw721 Basic</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">General</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/general/overview">Plus Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/cw-plus/general/tips">Advanced REPL tips</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">IBC</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/ibc/overview">IBC And CosmWasm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/ibc/relayer">Relayer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/ibc/active-connections">Active IBC connections</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/ibc/cw20-ics20">CW20 ICS20</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Media</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/next/resources/media/assets">Brand guidelines</a></li></ul></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for CosmWasm Documentation <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/0.14/cw-plus/cw4/spec">latest version</a></strong> (0.14).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_3a4h">CW4 Spec: Group Members</h1></header><div class="markdown"><p>cw4 package source code: <a href="https://github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw4/README.md" target="_blank" rel="noopener noreferrer">https://github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw4/README.md</a></p><p>cw4 is a spec for storing group membership, which can be combined
with cw3 multisigs. The purpose is to store a set of members/voters
that can be accessed to determine permissions in another section.</p><p>Since this is often deployed as a contract pair, we expect this
contract to often be queried with <code>QueryRaw</code> and the internal
layout of some of the data structures becomes part of the public API.
Implementations may add more data structures, but at least
the ones laid out here should be under the specified keys and in the
same format.</p><p>In this case, a cw3 contract could <em>read</em> an external group contract with
no significant cost more than reading local storage. However, updating
that group contract (if allowed), would be an external message and
charged the instantiation overhead for each contract.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="messages"></a>Messages<a class="hash-link" href="#messages" title="Direct link to heading">#</a></h2><p>We define an <code>InitMsg{admin, members}</code> to make it easy to set up a group
as part of another flow. Implementations should work with this setup,
but may add extra <code>Option&lt;T&gt;</code> fields for non-essential extensions to
configure in the <code>init</code> phase.</p><p>There are three messages supported by a group contract:</p><p><code>UpdateAdmin{admin}</code> - changes (or clears) the admin for the contract</p><p><code>AddHook{addr}</code> - adds a contract address to be called upon every
<code>UpdateMembers</code> call. This can only be called by the admin, and care must
be taken. A contract returning an error or running out of gas will
revert the membership change (see more in Hooks section below).</p><p><code>RemoveHook{addr}</code> - unregister a contract address that was previously set
by <code>AddHook</code>.</p><p>Only the <code>admin</code> may execute any of these function. Thus, by omitting an
<code>admin</code>, we end up with a similar functionality ad <code>cw3-fixed-multisig</code>.
If we include one, it may often be desired to be a <code>cw3</code> contract that
uses this group contract as a group. This leads to a bit of chicken-and-egg
problem, but we cover how to instantiate that in
<a href="/next/cw-plus/cw3/cw3-flex-spec"><code>cw3-flexible-multisig</code></a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="queries"></a>Queries<a class="hash-link" href="#queries" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="smart"></a>Smart<a class="hash-link" href="#smart" title="Direct link to heading">#</a></h3><p><code>TotalWeight{}</code> - Returns the total weight of all current members,
this is very useful if some conditions are defined on a &quot;percentage of members&quot;.</p><p><code>Member{addr, height}</code> - Returns the weight of this voter if they are a member of the
group (may be 0), or <code>None</code> if they are not a member of the group.
If height is set and the cw4 implementation supports snapshots,
this will return the weight of that member at
the beginning of the block with the given height.</p><p><code>MemberList{start_after, limit}</code> - Allows us to paginate over the list
of all members. 0-weight members will be included. Removed members will not.</p><p><code>Admin{}</code> - Returns the <code>admin</code> address, or <code>None</code> if unset.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="raw"></a>Raw<a class="hash-link" href="#raw" title="Direct link to heading">#</a></h3><p>In addition to the above &quot;SmartQueries&quot;, which make up the public API,
we define two raw queries that are designed for more efficiency
in contract-contract calls. These use keys exported by <code>cw4</code></p><p><code>TOTAL_KEY</code> - making a raw query with this key (<code>b&quot;total&quot;</code>) will return a
JSON-encoded <code>u64</code></p><p><code>members_key()</code> - takes a <code>CanonicalAddr</code> and returns a key that can be
used for raw query (<code>&quot;\x00\x07members&quot; || addr</code>). This will return
empty bytes if the member is not inside the group, otherwise a
JSON-encoded <code>u64</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="hooks"></a>Hooks<a class="hash-link" href="#hooks" title="Direct link to heading">#</a></h2><p>One special feature of the <code>cw4</code> contracts is they allow the admin to
register multiple hooks. These are special contracts that need to react
to changes in the group membership, and this allows them stay in sync.
Again, note this is a powerful ability and you should only set hooks
to contracts you fully trust, generally some contracts you deployed
alongside the group.</p><p>If a contract is registered as a hook on a cw4 contract, then anytime
<code>UpdateMembers</code> is successfully executed, the hook will receive a <code>handle</code>
call with the following format:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;member_changed_hook&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;diffs&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;addr&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;cosmos1y3x7q772u8s25c5zve949fhanrhvmtnu484l8z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;old_weight&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;new_weight&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">24</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>See <a href="https://github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw4/src/hook.rs" target="_blank" rel="noopener noreferrer">hook.rs</a> for full details. Note that this example
shows an update or an existing member. <code>old_weight</code> will
be missing if the address was added for the first time. And
<code>new_weight</code> will be missing if the address was removed.</p><p>The receiving contract must be able to handle the <code>MemberChangedHookMsg</code>
and should only return an error if it wants to change the functionality
of the group contract (eg. a multisig that wants to prevent membership
changes while there is an open proposal). However, such cases are quite
rare and often point to fragile code.</p><p>Note that the message sender will be the group contract that was updated.
Make sure you check this when handling, so external actors cannot
call this hook, only the trusted group.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/CosmWasm/docs/edit/main/docs/cw-plus/cw4/spec.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/next/cw-plus/cw3/cw3-flex-spec"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« CW3 Flexible Multisig</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/next/cw-plus/cw4/cw4-group-spec"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CW4 Group Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#messages" class="table-of-contents__link">Messages</a></li><li><a href="#queries" class="table-of-contents__link">Queries</a><ul><li><a href="#smart" class="table-of-contents__link">Smart</a></li><li><a href="#raw" class="table-of-contents__link">Raw</a></li></ul></li><li><a href="#hooks" class="table-of-contents__link">Hooks</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Related Documentation</h4><ul class="footer__items"><li class="footer__item"><a href="https://cosmos.network/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cosmos SDK</a></li><li class="footer__item"><a href="https://hub.cosmos.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cosmos Hub</a></li><li class="footer__item"><a href="https://docs.tendermint.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tendermint Core</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Repositories</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm/cosmwasm</a></li><li class="footer__item"><a href="https://github.com/CosmWasm/wasmd" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm/wasmd</a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm-plus" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm/cosmwasm-plus</a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cawesome-wasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm/cawesome-wasm</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://docs.cosmwasm.com/chat/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/CosmWasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://cosmwasm.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2021 Confio OÃœ</div></div></div></footer></div>
<script src="/assets/js/runtime~main.89c7119f.js"></script>
<script src="/assets/js/main.a496d034.js"></script>
</body>
</html>